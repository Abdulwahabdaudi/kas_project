import{r as b,h as k,N as $,o as i,b as d,n as e,v as _,a as t,f as h,t as c,F as m,d as j,q as I,O}from"./app-BWj68EOb.js";import{c as y}from"./createLucideIcon-DtRBIMiY.js";/**
 * @license lucide-vue-next v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=y("MinusIcon",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-vue-next v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=y("PlusIcon",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-vue-next v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=y("ShoppingBagIcon",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-vue-next v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=y("ShoppingCartIcon",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-vue-next v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=y("XIcon",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),r=b([]),x=b(!1),E=k(()=>r.value.reduce((n,a)=>n+a.price*a.quantity,0)),N=k(()=>r.value.reduce((n,a)=>n+a.quantity,0)),V=n=>{const a=r.value.find(o=>o.id===n.id);a?a.quantity+=1:r.value.push({...n,quantity:1}),x.value=!0},C=n=>{const a=r.value.findIndex(o=>o.id===n);a>-1&&r.value.splice(a,1)},R=(n,a)=>{const o=r.value.find(l=>l.id===n);o&&(o.quantity=Math.max(0,a),o.quantity===0&&C(n))},A=()=>{r.value=[],x.value=!1},D=()=>({cartItems:r,isCartOpen:x,cartTotal:E,cartCount:N,addToCart:V,removeFromCart:C,updateQuantity:R,clearCart:A}),L={class:"flex flex-col h-full"},Q={class:"p-4 border-b bg-green-50"},X={class:"flex justify-between items-center"},H=t("h2",{class:"text-lg font-semibold text-gray-900"},"Shopping Cart",-1),Y={class:"mt-2 text-sm text-gray-500"},Z={class:"flex-1 overflow-y-auto p-4 space-y-4"},G=["src","alt"],J={class:"flex-1"},K={class:"font-medium text-gray-900"},U={class:"text-sm text-gray-500"},W={class:"mt-1 flex items-center space-x-2"},tt=["onClick"],et={class:"text-gray-700"},st=["onClick"],at={class:"flex flex-col items-end space-y-2"},ot={class:"font-medium text-gray-900"},nt=["onClick"],rt={key:1,class:"text-center py-8"},ct=t("h3",{class:"mt-2 text-gray-900 font-medium"},"Your cart is empty",-1),lt=t("p",{class:"mt-1 text-gray-500"},"Add some products to your cart",-1),it={class:"border-t p-4 space-y-4"},dt={key:0,class:"space-y-2"},ut={class:"flex justify-between text-sm text-gray-600"},ht=t("span",null,"Subtotal",-1),yt={class:"flex justify-between font-medium text-gray-900"},pt=t("span",null,"Total",-1),gt=["disabled"],_t={class:"relative"},xt={key:0,class:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center"},vt={__name:"ShoppingCart",setup(n){const a=$(),{cartItems:o,isCartOpen:l,cartTotal:p,cartCount:g,removeFromCart:w,updateQuantity:v,clearCart:S}=D(),M=async()=>{try{O.post(route("checkout"),[p.value,o.value],{onSuccess:()=>{a.success("Order added successfully")},onError:()=>{a.error("Error saving product. Please try again.","error")}}),S()}catch{a.error("Error saving product. Please try again.","error")}};return(q,u)=>(i(),d(m,null,[e(l)?(i(),d("div",{key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-10 z-40",onClick:u[0]||(u[0]=s=>l.value=!1)})):_("",!0),t("div",{class:I(["fixed right-0 top-0 h-full w-full sm:w-96 bg-white z-50 transform transition-transform duration-300",e(l)?"translate-x-0":"translate-x-full"])},[t("div",L,[t("div",Q,[t("div",X,[H,t("button",{onClick:u[1]||(u[1]=s=>l.value=!1),class:"text-gray-500 hover:text-gray-700"},[h(e(B),{class:"h-6 w-6"})])]),t("div",Y,c(e(g))+" items in cart ",1)]),t("div",Z,[e(o).length?(i(!0),d(m,{key:0},j(e(o),s=>(i(),d("div",{key:s.id,class:"flex items-center space-x-4 bg-white rounded-lg border p-4"},[t("img",{src:s.image?`/storage/${s.image}`:"/image/Place_holder.jpg",alt:s.image,class:"w-20 h-20 object-cover rounded"},null,8,G),t("div",J,[t("h3",K,c(s.name),1),t("p",U,c(s.category),1),t("div",W,[t("button",{onClick:f=>e(v)(s.id,s.quantity-1),class:"text-gray-500 hover:text-gray-700"},[h(e(F),{class:"h-4 w-4"})],8,tt),t("span",et,c(s.quantity),1),t("button",{onClick:f=>e(v)(s.id,s.quantity+1),class:"text-gray-500 hover:text-gray-700"},[h(e(z),{class:"h-4 w-4"})],8,st)])]),t("div",at,[t("span",ot,"$"+c((s.price*s.quantity).toFixed(2)),1),t("button",{onClick:f=>e(w)(s.id),class:"text-red-600 hover:text-red-700 text-sm"}," Remove ",8,nt)])]))),128)):(i(),d("div",rt,[h(e(P),{class:"mx-auto h-12 w-12 text-gray-400"}),ct,lt]))]),t("div",it,[e(o).length?(i(),d("div",dt,[t("div",ut,[ht,t("span",null,"$"+c(e(p).toFixed(2)),1)]),t("div",yt,[pt,t("span",null,"$"+c(e(p).toFixed(2)),1)])])):_("",!0),t("button",{onClick:M,disabled:!e(o).length,class:"w-full bg-green-600 text-white py-3 px-4 rounded-md hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed"}," Add ORDER ",8,gt)])])],2),t("button",{onClick:u[2]||(u[2]=s=>l.value=!0),class:"fixed bottom-4 right-4 bg-green-600 text-white p-3 rounded-full shadow-lg hover:bg-green-700 z-30"},[t("div",_t,[h(e(T),{class:"h-6 w-6"}),e(g)?(i(),d("span",xt,c(e(g)),1)):_("",!0)])])],64))}},bt=Object.freeze(Object.defineProperty({__proto__:null,default:vt},Symbol.toStringTag,{value:"Module"}));export{P as S,vt as _,bt as a,D as u};
